from string import Template

makefileTemplate = Template("""
# This file is Auto generated by OpenClovis IDE
# Copyright (C) 2009-2010 OpenClovis
#
# This file is free; you can redistribute it and/or
# modify it under the terms of the GNU Lesser General Public
# License as published by the Free Software Foundation; either
# version 2 of the License, or (at your option) any later version.
#
# This file is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# Lesser General Public License for more details.
#
# Author(s): OpenClovis
#

SUBDIRS :=${appnames}

MODEL = ${modelname}
BUNDLE = opensaf_app_bundle.tgz

all:
	list='$(SUBDIRS)'; for subdir in $$$list; do \\
	(cd $$$subdir && $(MAKE) all) \\
	done;

clean:
	list='$(SUBDIRS)'; for subdir in $$$list; do \\
	(cd $$$subdir && $(MAKE) clean) \\
	done; \\
	rm -rf pkg opt $(MODEL) $(BUNDLE)

package:
	list='$(SUBDIRS)'; \\
	mkdir -p pkg; \\
	for subdir in $$$list; do \\
	(cd $$$subdir && $(MAKE) package) \\
	done; \\
	pwd; \\
	mv pkg $(MODEL); \\
	if [ -e opt ]; then \\
		rm -rf opt_old; \\
		mv opt opt_old; \\
	fi; \\
	mkdir opt; mv $(MODEL) opt/; \\
	tar zcvf $(BUNDLE) opt;
""")	
