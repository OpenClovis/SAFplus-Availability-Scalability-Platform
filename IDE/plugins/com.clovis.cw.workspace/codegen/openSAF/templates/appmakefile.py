from string import Template

appMakefileTemplate = Template("""
# This file is Auto generated by OpenClovis IDE
# Copyright (C) 2009-2010 OpenClovis
#
# This file is free; you can redistribute it and/or
# modify it under the terms of the GNU Lesser General Public
# License as published by the Free Software Foundation; either
# version 2 of the License, or (at your option) any later version.
#
# This file is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# Lesser General Public License for more details.
#
# Author(s): OpenClovis
#

OPENSAF_INC_DIR ?= /usr/include/opensaf 
OPENSAF_LIB_DIR ?= /usr/local/lib/opensaf

PROG = ${appname}
PROG_SCRIPT = $(PROG)_script

SRCS = ${wildcard *.c}
OBJS = $(SRCS:%.c=%.o)


CC = gcc
CFLAGS = -g -O2 -Wall -fPIC
INCLUDES = -I. -I$(OPENSAF_INC_DIR)
LDFLAGS = -lSaAmf -lSaEvt -lSaCkpt -lSaClm -lSaMsg -lavsv_common -lopensaf_core -L$(OPENSAF_LIB_DIR)

all: $(PROG)

standalone: CFLAGS = -g -Wall -fPIC -D STANDALONE

standalone: $(OBJS)
	${CC} ${CPPFLAGS} ${CFLAGS} ${INCLUDES} -o $@ ${OBJS} ${LDFLAGS}


$(PROG): $(OBJS)
	${CC} ${CPPFLAGS} ${CFLAGS} ${INCLUDES} -o $@ ${OBJS} ${LDFLAGS}

.c.o:   Makefile
	${CC} ${CPPFLAGS} ${CFLAGS} ${INCLUDES} -c $< -o $(<:%.c=%.o)

depend:
	makedepend ${INCLUDES} ${SRCS}

package:
	chmod +x ${PROG_SCRIPT}
	cp ${PROG} ${PROG_SCRIPT} ../pkg/

clean:
	rm -f *.o core *~ $(PROG) *.tgz
""")	
