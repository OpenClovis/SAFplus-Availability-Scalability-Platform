<?xml version='1.0'?>
<project name="classgen" default="full" basedir=".">
    <property name="debug"              value="true"/>
    <property name="castor_plugin"      value="../com.clovis.common.utils/lib"/>
    <property name="gen_package_dir"    value="com/clovis/cw/genericeditor/gen"/>
    <property name="gen_package_root"   value="com.clovis.cw.genericeditor.gen"/>
    <path id="castor.classpath">
        <fileset dir="${castor_plugin}">
            <include name="**/*.jar"/>
        </fileset>
    </path>

    <taskdef name="castor" classpathref="castor.classpath" 
        classname="CastorSourceGenTask"/>

    <!-- Removes generated file and generates again -->
    <target name="full" depends="clean, classgen"/>
    <!-- Generates file if schema is changed -->
    <target name="incremental" depends="classgen"/>
    <!-- Removes all generated files -->
    <target name="clean">
        <delete dir="src/${gen_package_dir}"/>
    </target>

    <!--
        Target to generate classes. For each xsd a castor task has
        to defined. Following is an example which reads menu.xsd
        and generate package com.clovis.cw.xsd.gen.menu.
        
    -->
    
    <target name="classgen">
    <castor file="xsd/metaclasses.xsd" 
            properties="${castor_plugin}/castor/castorbuilder.properties"
            warnings="false"
            types="j2" todir="src" package="${gen_package_root}.metaclasses"/>
    <castor file="xsd/uiproperties.xsd" 
            properties="${castor_plugin}/castor/castorbuilder.properties"
            warnings="false"
            types="j2" todir="src" package="${gen_package_root}.uiproperties"/>
    </target>
</project>
