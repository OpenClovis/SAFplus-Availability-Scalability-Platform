# Copyright (C) 2002-2012 OpenClovis Solutions Inc.  All Rights Reserved.
# This file is available  under  a  commercial  license  from  the
# copyright  holder or the GNU General Public License Version 2.0.
#
# The source code for  this program is not published  or otherwise 
# divested of  its trade secrets, irrespective  of  what  has been 
# deposited with the U.S. Copyright office.
# 
# This program is distributed in the  hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied  warranty  of 
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU 
# General Public License for more details.
# 
# For more  information,  see the  file COPYING provided with this
# material.
################################################################################
# ModuleName  : common
# File        : clasp.env.in
################################################################################
# Description :
################################################################################
#!/bin/bash
## AA removing ASP directory test
#if [ ! -d models ]
#then
#    echo "Please Source the script from ASP directory"
#    return 0
#fi

oldpwd=$OLDPWD
export CL_TARGET_PLATFORM=x86_64
export CL_TARGET_OS=linux-3.2.30
export CLOVIS_ROOT=/opt/clovis/sdk-6.0/src
export PROJECT_ROOT=/root/SAFplus/SAFplus-Availability-Scalability-Platform/src/examples/mgr/ide_workspace
#export ASP_TARGET=$CLOVIS_ROOT/ASP/target/$CL_TARGET_PLATFORM/$CL_TARGET_OS
export ASP_VERSION=6.0
export SDK_DIR=/opt/clovis/sdk-6.0
export ASP_INSTALLDIR=/opt/clovis/sdk-6.0
export ASP_BUILD=1
export BUILD_ROOT=/root/SAFplus/SAFplus-Availability-Scalability-Platform/src/examples/mgr/ide_workspace/amfMgr/build/local

# This points to the actual model where the BIN will be placed
export ASP_MODEL=$PROJECT_ROOT
if [ -z $ASP_MODEL_NAME ]; then
	echo "Setting ASP_MODEL_NAME to amfMgr"
	export ASP_MODEL_NAME=amfMgr
fi
export MODEL_PATH=$PROJECT_ROOT/amfMgr/src
export ASP_CONFIG=$MODEL_PATH/config
export MODEL_CONFIG=$MODEL_PATH/config
export MODEL_TARGET=$PROJECT_ROOT/$ASP_MODEL_NAME/target/$CL_TARGET_PLATFORM/$CL_TARGET_OS
export ASP_TARGET=$PROJECT_ROOT/target/$CL_TARGET_PLATFORM/$CL_TARGET_OS
export MODEL_LIB=$MODEL_TARGET/lib
export ASP_BINDIR=$MODEL_TARGET/bin
export MODEL_BIN=$MODEL_TARGET/bin
export ASP_LIB=$ASP_TARGET/lib
export ASP_KMOD=$ASP_TARGET/kmod

export ASP_LIBDIR=$ASP_INSTALLDIR/target/$CL_TARGET_PLATFORM/$CL_TARGET_OS/lib
export ASP_INCLUDE=$ASP_INSTALLDIR/include

export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$ASP_LIB:$MODEL_LIB

export OPENHPILIBS=""
export OPENHPICFLAGS=""
export CL_INST=0
export HCL_CM=0
export HPI_EMERSON=0
export BUILD_TIPC=1
export TIPC_INCLUDE=/lib/modules/3.2.0-32-generic/build/include
export CM_BUILD=0
export MODEL_BUILD=1
export PREFIX=/opt/clovis/sdk-6.0
export SNMP_BUILD=1
export TOOLCHAIN_DIR=/opt/clovis/buildtools/local
export TARGET_QNX=0
export TARGET_SOLARIS=0
export OPENAIS_TIPC=1

mkdir -p $ASP_BINDIR
mkdir -p $ASP_LIB
mkdir -p $ASP_KMOD
mkdir -p $MODEL_LIB
mkdir -p $MODEL_BIN

if [ $TARGET_SOLARIS -eq 1 ]; then
    export SOLARIS_BUILD=1
    export PATH=/usr/sfw/bin:$PATH
    alias awk=gawk
    alias make=gmake
    export LDFLAGS="-lsocket -lnsl"
    unset MAKEFLAGS
fi

export ARCH=
export MARCH=
export TARGET=

if [ "`basename $TOOLCHAIN_DIR`" != "local" ]; then
    if [ -f $TOOLCHAIN_DIR/config.mk ]; then
        source $TOOLCHAIN_DIR/config.mk
    fi
fi

if [ "$WIND_VER" = "2.0" ]; then
    if [ -f $BUILD_ROOT/mk/wrs.mk ]; then
        source $BUILD_ROOT/mk/wrs.mk
    fi
fi

#cd ASP
#if [ -d 3rdparty/ezxml ]; then
#cd 3rdparty/ezxml
#rm -fr stable
#ln -s ./ezxml-0.8.5 ./stable
#cd $CLOVIS_ROOT/ASP/
#fi
#OLDPWD=$oldpwd
