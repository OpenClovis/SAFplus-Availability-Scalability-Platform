/* 
 * File Stream.hxx
 * This file has been auto-generated by Y2CPP, the
 * plug-in of pyang.
 */ 

#pragma once
#ifndef STREAM_HXX_
#define STREAM_HXX_
#include "SAFplusLogCommon.hxx"
#include <clGroup.hxx>
#include "StreamStatistics.hxx"

#include <vector>
#include "MgtFactory.hxx"
#include <string>
#include "StreamStatistics.hxx"
#include "StreamAttributes.hxx"

namespace SAFplusLog
  {

    class Stream : public StreamAttributes {

        /* Apply MGT object factory */
        MGT_REGISTER(Stream);

    public:
        Stream();
        Stream(std::string nameValue);
        std::vector<std::string> getKeys();
        std::vector<std::string>* getChildNames();

        /*
         * XPATH: /SAFplusLog/StreamConfig/stream/StreamStatistics
         */
        SAFplusLog::StreamStatistics* getStreamStatistics();

        /*
         * XPATH: /SAFplusLog/StreamConfig/stream/StreamStatistics
         */
        void addStreamStatistics(SAFplusLog::StreamStatistics *StreamStatisticsValue);
        ~Stream();
     /* Custom code -- NOT autogenerated */
  
     FILE* fp;  // If this stream will be output to a file on this node, this is pointer to that file handle.  Otherwise NULL
     int fileIdx;  // If the file is being rotated, this is the current file count.  i.e. file name is ("%s%d.log",fileName,fileIdx)
     int earliestIdx; // The oldest index of file of this stream
     int numFiles; // the current number of files created of this stream
     int fileSize; // Current length of the open file
     std::string filePath; // full path to log file after being adjusted
     SAFplus::Group group;
     //boost::asio::streambuf fileBuffer; //char* fileBuffer; // logs are spooled to this buffer and then written to the file all at once
     //std::ostream fileStream;
     //boost::asio::streambuf msgBuffer; //char* msgBuffer; // logs are spooled to this buffer and then written to the network as one packet
     //std::ostream msgStream;
     SAFplus::DoublingCharBuffer fileBuffer; // logs are spooled to this buffer and then written to the file all at once
     SAFplus::DoublingCharBuffer msgBuffer;  // logs are spooled to this buffer and then written to the network as one packet
     //SAFplus::DoublingShortBuffer logLenBuffer;  // length of each log contained in the buffer
     //SAFplus::DoublingShortBuffer logSevBuffer; // severity of each log contained in the buffer
     SAFplus::ReplicationMessageBuffer replicationMessageBuffer;  // the buffer storing header of the log package and multiple logs. Here is the message format: |header(LogMsgHeader)|logLen(short)|severity|logMsg|logLen(short)|severity|logMsg|...     
     short numLogs; // number of logs which was packed into the replicationMessageBuffer above
     bool sendMsg;                               // Does this stream need to be sent to anyone else?
     bool dirty;                             // Has this stream been changed?
     /* End custom code */

    };
}
/* namespace SAFplusLog */
#endif /* STREAM_HXX_ */
